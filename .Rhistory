install.packages(c("anytime", "broom", "commonmark", "data.table", "dataRetrieval", "httr2", "neonUtilities", "pbapply", "purrr", "raster", "reticulate", "rnaturalearth", "rprojroot", "RSQLite", "s2", "sf", "spatstat", "spatstat.explore", "spatstat.geom", "spatstat.linnet", "spatstat.model", "spatstat.univar", "spatstat.utils", "stars", "terra", "tmaptools", "waldo"))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(mnsentinellakes)
beaches <- read.csv("Beaches-2004-2024-RC-MPRB-TRPD_050825.csv")
beaches <- read.csv("Beaches-2004-2024-RC-MPRB-TRPD_050825.csv") %>%
rename(DOW = DNRID)
beaches <- read.csv("Beaches-2004-2024-RC-MPRB-TRPD_050825.csv") %>%
rename(DOW = DNRID) %>%
mutate(DOW = fixlakeid(DOW))
beachesmissingDOW <- beaches %>%
filter(is.na(DOW))
beaches <- beaches %>%
filter(!is.na(DOW))
mutate(DOW = fixlakeid(DOW))
beaches <- beaches %>%
filter(!is.na(DOW)) %>%
mutate(DOW = fixlakeid(DOW))
View(beaches)
beaches <- read.csv("Beaches-2004-2024-RC-MPRB-TRPD_050825.csv")
beachesmissingDOW <- beaches %>%
filter(is.na(DNRID))
beaches <- beaches %>%
filter(!is.na(DNRID)) %>%
mutate(DNRID = fixlakeid(DNRID)) %>%
mutate(DOW = paste0(DNRID, "00"))
beaches <- beaches %>%
filter(!is.na(DNRID)) %>%
mutate(DNRID = fixlakeid(DNRID)) %>%
mutate(DOW = paste0(DNRID, "00")) %>%
select(BeachName, DOW, Date, MonitoringOrg, Ecoli_1dGM, Ecoli_30dGM, Ecoli_units, Entero_avg_cfu, Microcystin_ugL, Cylindro_ugL, Anatoxin_ugL, ClosureYN, ClosureReason)
beaches <- beaches %>%
filter(!is.na(DNRID)) %>%
mutate(DNRID = fixlakeid(DNRID)) %>%
mutate(DOW = paste0(DNRID, "00")) %>%
mutate(Date = as.POSIXct(DAte)) %>%
select(BeachName, DOW, Date, MonitoringOrg, Ecoli_1dGM, Ecoli_30dGM, Ecoli_units, Entero_avg_cfu, Microcystin_ugL, Cylindro_ugL, Anatoxin_ugL, ClosureYN, ClosureReason)
# subset swim ponds with no dow
beachesmissingDOW <- beaches %>%
filter(is.na(DNRID)) %>%
rename(DOW = DNRID)
beachesmissingDOW <- beaches %>%
filter(is.na(DNRID)) %>%
rename(DOW == DNRID)
beachesmissingDOW <- beaches %>%
filter(is.na(DNRID)) %>%
rename(DNRID = DOW)
beaches <- read.csv("Beaches-2004-2024-RC-MPRB-TRPD_050825.csv")
# subset swim ponds with no dow
beachesmissingDOW <- beaches %>%
filter(is.na(DNRID)) %>%
rename(DNRID = DOW)
beachesmissingDOW <- beaches %>%
filter(is.na(DNRID)) %>%
rename(DOW = DNRID)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(mnsentinellakes)
# clear workspace
rm(list = ls())
beaches <- read.csv("Beaches-2004-2024-RC-MPRB-TRPD_050825.csv")
# subset swim ponds with no dow
beachesmissingDOW <- beaches %>%
filter(is.na(DNRID)) %>%
rename(DOW = DNRID)
# fix DNRID and add zeroes
beaches <- beaches %>%
filter(!is.na(DNRID)) %>%
mutate(DNRID = fixlakeid(DNRID)) %>%
mutate(DOW = paste0(DNRID, "00"))
# Add swim ponds back in, fix date, and rearrange columns
beaches <- cbind(beaches, beachesmissingDOW)
beaches <- read.csv("Beaches-2004-2024-RC-MPRB-TRPD_050825.csv")
# subset swim ponds with no dow
beachesmissingDOW <- beaches %>%
filter(is.na(DNRID)) %>%
rename(DOW = DNRID)
# fix DNRID and add zeroes
beaches <- beaches %>%
filter(!is.na(DNRID)) %>%
mutate(DNRID = fixlakeid(DNRID)) %>%
mutate(DOW = paste0(DNRID, "00"))
# Add swim ponds back in,
beaches <- rbind(beaches, beachesmissingDOW)
beaches <- beaches %>%
filter(!is.na(DNRID)) %>%
mutate(DNRID = fixlakeid(DNRID)) %>%
mutate(DOW = paste0(DNRID, "00")) %>%
select(-DNRID)
# Add swim ponds back in,
beaches <- rbind(beaches, beachesmissingDOW)
beaches <- beaches
mutate(Date = as.POSIXct(Date))
beaches <- beaches
mutate(Date = as.Date(Date))
beaches <- beaches
mutate(Date = as.Date(Date, format="%m/%d/%Y")) %>%
select(BeachName, DOW, Date, MonitoringOrg, Ecoli_1dGM, Ecoli_30dGM, Ecoli_units, Entero_avg_cfu, Microcystin_ugL, Cylindro_ugL, Anatoxin_ugL, ClosureYN, ClosureReason)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lubridate)
library(mnsentinellakes)
# clear workspace
rm(list = ls())
beaches <- read.csv("Beaches-2004-2024-RC-MPRB-TRPD_050825.csv")
# subset swim ponds with no dow
beachesmissingDOW <- beaches %>%
filter(is.na(DNRID)) %>%
rename(DOW = DNRID)
# fix DNRID and add zeroes
beaches <- beaches %>%
filter(!is.na(DNRID)) %>%
mutate(DNRID = fixlakeid(DNRID)) %>%
mutate(DOW = paste0(DNRID, "00")) %>%
select(-DNRID)
# Add swim ponds back in,
beaches <- rbind(beaches, beachesmissingDOW)
# fix date, and rearrange columns
beaches <- beaches
mutate(Date = as.Date(Date, format="%m/%d/%Y")) %>%
select(BeachName, DOW, Date, MonitoringOrg, Ecoli_1dGM, Ecoli_30dGM, Ecoli_units, Entero_avg_cfu, Microcystin_ugL, Cylindro_ugL, Anatoxin_ugL, ClosureYN, ClosureReason)
View(beaches)
beaches <- beaches
mutate(Date = parse_date(Date, format="%m/%d/%Y"))
beaches <- beaches
mutate(Date = as.Date(Date, format = "%d/%m/%Y"))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lubridate)
library(mnsentinellakes)
# clear workspace
rm(list = ls())
beaches <- read.csv("Beaches-2004-2024-RC-MPRB-TRPD_050825.csv")
# subset swim ponds with no dow
beachesmissingDOW <- beaches %>%
filter(is.na(DNRID)) %>%
rename(DOW = DNRID)
# fix DNRID and add zeroes
beaches <- beaches %>%
filter(!is.na(DNRID)) %>%
mutate(DNRID = fixlakeid(DNRID)) %>%
mutate(DOW = paste0(DNRID, "00")) %>%
select(-DNRID)
# Add swim ponds back in,
beaches <- rbind(beaches, beachesmissingDOW)
# fix date, and rearrange columns
# beaches <- beaches
#   mutate(Date = as.Date(Date, format = "%d/%m/%Y"))
#
#
#
#
#   %>%
#   select(BeachName, DOW, Date, MonitoringOrg, Ecoli_1dGM, Ecoli_30dGM, Ecoli_units, Entero_avg_cfu, Microcystin_ugL, Cylindro_ugL, Anatoxin_ugL, ClosureYN, ClosureReason)
# save
write.csv(beaches, "beach_combined_data_081125.csv", row.names = FALSE)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lubridate)
library(mnsentinellakes)
# clear workspace
rm(list = ls())
beaches <- read.csv("Beaches-2004-2024-RC-MPRB-TRPD_050825.csv")
# subset swim ponds with no dow
beachesmissingDOW <- beaches %>%
filter(is.na(DNRID)) %>%
rename(DOW = DNRID)
# fix DNRID and add zeroes
beaches <- beaches %>%
filter(!is.na(DNRID)) %>%
mutate(DNRID = fixlakeid(DNRID)) %>%
mutate(DOW = paste0(DNRID, "00")) %>%
select(-DNRID)
# Add swim ponds back in,
beaches <- rbind(beaches, beachesmissingDOW)
# fix date,
# beaches <- beaches
#   mutate(Date = as.Date(Date, format = "%d/%m/%Y"))
# rearrange columns
beaches <- beaches %>%
select(BeachName, DOW, Date, MonitoringOrg, Ecoli_1dGM, Ecoli_30dGM, Ecoli_units, Entero_avg_cfu, Microcystin_ugL, Cylindro_ugL, Anatoxin_ugL, ClosureYN, ClosureReason)
# save
write.csv(beaches, "beach_combined_data_081125.csv", row.names = FALSE)
beaches <- beaches
mutate(Date = as.Date(Date, format = "%d/%m/%Y"))
beaches <- beaches
mutate(Date = as.Date(Date, format = "%Y-%m-%d"))
beaches <- beaches %>%
mutate(Date = as.Date(Date, format = "%Y-%m-%d"))
beaches <- read.csv("Beaches-2004-2024-RC-MPRB-TRPD_050825.csv")
# subset swim ponds with no dow
beachesmissingDOW <- beaches %>%
filter(is.na(DNRID)) %>%
rename(DOW = DNRID)
# fix DNRID and add zeroes
beaches <- beaches %>%
filter(!is.na(DNRID)) %>%
mutate(DNRID = fixlakeid(DNRID)) %>%
mutate(DOW = paste0(DNRID, "00")) %>%
select(-DNRID)
# Add swim ponds back in,
beaches <- rbind(beaches, beachesmissingDOW)
# fix date, rearrange columns
beaches <- beaches %>%
mutate(Date = as.Date(Date, format = "%Y-%m-%d")) %>%
select(BeachName, DOW, Date, MonitoringOrg, Ecoli_1dGM, Ecoli_30dGM, Ecoli_units, Entero_avg_cfu, Microcystin_ugL, Cylindro_ugL, Anatoxin_ugL, ClosureYN, ClosureReason)
# save
write.csv(beaches, "beach_combined_data_081125.csv", row.names = FALSE)
beaches <- read.csv("Beaches-2004-2024-RC-MPRB-TRPD_050825.csv")
# subset swim ponds with no dow
beachesmissingDOW <- beaches %>%
filter(is.na(DNRID)) %>%
rename(DOW = DNRID)
# fix DNRID and add zeroes
beaches <- beaches %>%
filter(!is.na(DNRID)) %>%
mutate(DNRID = fixlakeid(DNRID)) %>%
mutate(DOW = paste0(DNRID, "00")) %>%
select(-DNRID)
# Add swim ponds back in,
beaches <- rbind(beaches, beachesmissingDOW)
# fix date, rearrange columns
beaches <- beaches %>%
mutate(Date = as.Date(Date, format = "%Y-%m-%d")) %>%
select(BeachName, DOW, Date, MonitoringOrg, Ecoli_1dGM, Ecoli_30dGM, Ecoli_units, ClosureYN, ClosureReason)
# save
write.csv(beaches, "beach_combined_Ecoli_081125.csv", row.names = FALSE)
Ramsey <- beaches_formatted %>%
select(MonitoringOrg == "RamseyCo")
beaches <- read.csv("Beaches-2004-2024-RC-MPRB-TRPD_050825.csv")
# subset swim ponds with no dow
beachesmissingDOW <- beaches %>%
filter(is.na(DNRID)) %>%
rename(DOW = DNRID)
# fix DNRID and add zeroes
beaches <- beaches %>%
filter(!is.na(DNRID)) %>%
mutate(DNRID = fixlakeid(DNRID)) %>%
mutate(DOW = paste0(DNRID, "00")) %>%
select(-DNRID)
# Add swim ponds back in,
beaches <- rbind(beaches, beachesmissingDOW)
# fix date, rearrange columns
beaches_formatted <- beaches %>%
mutate(Date = as.Date(Date, format = "%Y-%m-%d")) %>%
select(BeachName, DOW, Date, MonitoringOrg, Ecoli_1dGM, Ecoli_30dGM, Ecoli_units, ClosureYN, ClosureReason)
# save
write.csv(beaches_formatted, "beach_combined_Ecoli_081125.csv", row.names = FALSE)
Ramsey <- beaches_formatted %>%
select(MonitoringOrg == "RamseyCo")
Ramsey <- beaches_formatted %>%
filter(MonitoringOrg == "RamseyCo")
write.csv(Ramsey , "RamseyCo_081125.csv", row.names = FALSE)
TRPB <- beaches_formatted %>%
filter(MonitoringOrg == "TRPD")
write.csv(TRPD , "TRPD_081125.csv", row.names = FALSE)
TRPD <- beaches_formatted %>%
filter(MonitoringOrg == "TRPD")
write.csv(TRPD , "TRPD_081125.csv", row.names = FALSE)
MPRB_habs <- beaches%>%
filter(MonitoringOrg == "MPRB") %>%
mutate(Date = as.Date(Date, format = "%Y-%m-%d")) %>%
select(BeachName, DOW, Date, MonitoringOrg, Entero_avg_cfu, Microcystin_ugL, Cylindro_ugL, Anatoxin_ugL, ClosureYN, ClosureReason)
write.csv(MPRB_habs, "MPRB_habs_081125.csv", row.names = FALSE)
MPRB_ecoli <- beaches_formatted %>%
filter(MonitoringOrg == "MPRB")
write.csv(MPRB_ecoli , "MPRB_Ecoli_081125.csv", row.names = FALSE)
